<!DOCTYPE html>
<html lang="en">
<head>
    <title>The Kingdom of Choices</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(to bottom, #1e3c72, #2a5298);
            min-height: 100vh;
        }
        
        .game-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #1e3c72;
            font-size: 2em;
            margin-bottom: 20px;
        }
        
        .status-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
        }
        
        .stat-card {
            background: white;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-label {
            font-size: 11px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }
        
        .story-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
        }
        
        .story-text {
            font-size: 18px;
            line-height: 1.7;
            color: #2c3e50;
        }
        
        .location-tag {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .choices-section {
            margin: 20px 0;
        }
        
        .choice-button {
            display: block;
            width: 100%;
            padding: 15px 20px;
            margin: 10px 0;
            font-size: 16px;
            background: white;
            color: #333;
            border: 2px solid #667eea;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }
        
        .choice-button:hover {
            background: #667eea;
            color: white;
            transform: translateX(5px);
        }
        
        .choice-button.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            border-color: #ccc;
        }
        
        .choice-button.disabled:hover {
            background: white;
            color: #999;
            transform: none;
        }
        
        .requirement {
            font-size: 12px;
            color: #e74c3c;
            font-style: italic;
        }
        
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .warning-message {
            background: #fff3cd;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .danger-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .inventory-section {
            margin-top: 20px;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 10px;
        }
        
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .inventory-item {
            background: white;
            padding: 8px;
            border-radius: 5px;
            text-align: center;
            font-size: 14px;
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>‚öîÔ∏è The Kingdom of Choices ‚öîÔ∏è</h1>
        
        <div class="status-panel">
            <div class="stat-card">
                <div class="stat-label">Health</div>
                <div class="stat-value" id="health">100</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Gold</div>
                <div class="stat-value" id="gold">20</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Reputation</div>
                <div class="stat-value" id="reputation">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Day</div>
                <div class="stat-value" id="day">1</div>
            </div>
        </div>
        
        <div class="story-section">
            <div class="location-tag" id="location">Town Square</div>
            <div class="story-text" id="story">
                Welcome to the Kingdom! You are a traveling adventurer who has just arrived in town. 
                The kingdom is facing troubles - bandits roam the roads, a dragon threatens the mountains, 
                and mysterious events occur at night. How will you help?
            </div>
        </div>
        
        <div class="choices-section" id="choices">
            <button class="choice-button" onclick="goToTavern()">
                üç∫ Visit the Tavern
            </button>
            <button class="choice-button" onclick="goToMarket()">
                üõçÔ∏è Browse the Market
            </button>
            <button class="choice-button" onclick="goToCastle()">
                üè∞ Approach the Castle
            </button>
        </div>
        
        <div class="inventory-section">
            <strong>Inventory:</strong>
            <div class="inventory-grid" id="inventory">
                <div class="inventory-item">Traveler's Cloak</div>
            </div>
        </div>
    </div>

    <script>
        // Game State
        let playerHealth = 100;
        let playerGold = 20;
        let playerReputation = 0;
        let currentDay = 1;
        let currentLocation = "Town Square";
        let inventory = ["Traveler's Cloak"];
        
        // Quest Flags
        let knowsAboutDragon = false;
        let knowsAboutBandits = false;
        let helpedMerchant = false;
        let castleQuestActive = false;
        let dragonDefeated = false;
        let banditsDefeated = false;
        
        // Helper Functions
        function updateDisplay() {
            document.getElementById('health').innerHTML = playerHealth;
            document.getElementById('gold').innerHTML = playerGold;
            document.getElementById('reputation').innerHTML = playerReputation;
            document.getElementById('day').innerHTML = currentDay;
            document.getElementById('location').innerHTML = currentLocation;
            
            // Update inventory
            if (inventory.length === 0) {
                document.getElementById('inventory').innerHTML = '<div class="inventory-item">Empty</div>';
            } else {
                document.getElementById('inventory').innerHTML = 
                    inventory.map(item => `<div class="inventory-item">${item}</div>`).join('');
            }
        }
        
        function setStory(text) {
            document.getElementById('story').innerHTML = text;
        }
        
        function setChoices(choicesHTML) {
            document.getElementById('choices').innerHTML = choicesHTML;
        }
        
        function hasItem(item) {
            return inventory.includes(item);
        }
        
        function addItem(item) {
            if (!hasItem(item)) {
                inventory.push(item);
                updateDisplay();
            }
        }
        
        function removeItem(item) {
            inventory = inventory.filter(i => i !== item);
            updateDisplay();
        }
        
        function changeHealth(amount) {
            playerHealth += amount;
            if (playerHealth > 100) playerHealth = 100;
            if (playerHealth <= 0) {
                playerHealth = 0;
                gameOver();
            }
            updateDisplay();
        }
        
        function changeGold(amount) {
            playerGold += amount;
            if (playerGold < 0) playerGold = 0;
            updateDisplay();
        }
        
        function changeReputation(amount) {
            playerReputation += amount;
            updateDisplay();
        }
        
        function nextDay() {
            currentDay++;
            changeHealth(10); // Rest recovers some health
            updateDisplay();
        }
        
        // Location Functions
        function goToTavern() {
            currentLocation = "Tavern";
            let storyText = "The tavern is warm and lively. ";
            
            // Different events based on time and reputation
            if (currentDay === 1 && !knowsAboutDragon) {
                storyText += "You overhear travelers talking about a dragon in the mountains!";
                knowsAboutDragon = true;
            } else if (playerReputation >= 10) {
                storyText += "People recognize you as a hero and buy you drinks!";
                changeGold(5);
            } else if (playerReputation < -5) {
                storyText += "People seem wary of you and keep their distance.";
            } else {
                storyText += "The bartender nods at you friendly.";
            }
            
            setStory(storyText);
            
            let choices = '';
            
            // Conditional choices based on game state
            if (playerGold >= 5) {
                choices += '<button class="choice-button" onclick="buyDrink()">üç∫ Buy a Drink (5 gold)</button>';
            } else {
                choices += '<button class="choice-button disabled">üç∫ Buy a Drink (Not enough gold)</button>';
            }
            
            if (knowsAboutDragon && !hasItem("Dragon Map")) {
                choices += '<button class="choice-button" onclick="askAboutDragon()">üêâ Ask about the Dragon</button>';
            }
            
            if (currentDay > 1 && !knowsAboutBandits) {
                choices += '<button class="choice-button" onclick="listenToRumors()">üëÇ Listen to Rumors</button>';
            }
            
            choices += '<button class="choice-button" onclick="rest()">üò¥ Rest for the Night</button>';
            choices += '<button class="choice-button" onclick="returnToSquare()">üö∂ Leave Tavern</button>';
            
            setChoices(choices);
            updateDisplay();
        }
        
        function goToMarket() {
            currentLocation = "Market";
            let storyText = "The market is bustling with merchants and shoppers. ";
            
            if (!helpedMerchant && playerReputation < 5) {
                storyText += "A merchant calls for help - thieves are stealing from him!";
            } else if (helpedMerchant) {
                storyText += "The merchant you helped waves at you gratefully.";
            } else {
                storyText += "Various goods are on display.";
            }
            
            setStory(storyText);
            
            let choices = '';
            
            // Shop items with conditional availability
            if (playerGold >= 30 && !hasItem("Sword")) {
                choices += '<button class="choice-button" onclick="buySword()">‚öîÔ∏è Buy Sword (30 gold)</button>';
            } else if (!hasItem("Sword")) {
                choices += '<button class="choice-button disabled">‚öîÔ∏è Buy Sword (Need 30 gold)</button>';
            }
            
            if (playerGold >= 20 && !hasItem("Shield")) {
                choices += '<button class="choice-button" onclick="buyShield()">üõ°Ô∏è Buy Shield (20 gold)</button>';
            } else if (!hasItem("Shield")) {
                choices += '<button class="choice-button disabled">üõ°Ô∏è Buy Shield (Need 20 gold)</button>';
            }
            
            if (playerGold >= 15 && !hasItem("Health Potion")) {
                choices += '<button class="choice-button" onclick="buyPotion()">üß™ Buy Health Potion (15 gold)</button>';
            }
            
            if (!helpedMerchant) {
                choices += '<button class="choice-button" onclick="helpMerchant()">üëÆ Help the Merchant</button>';
            }
            
            choices += '<button class="choice-button" onclick="returnToSquare()">üö∂ Leave Market</button>';
            
            setChoices(choices);
            updateDisplay();
        }
        
        function goToCastle() {
            currentLocation = "Castle Gates";
            let storyText = "";
            
            // Castle access depends on reputation
            if (playerReputation < 15) {
                storyText = "The guards stop you. 'You need to prove yourself before seeing the king. Come back when you have a reputation of at least 15.'";
                setStory(storyText);
                setChoices('<button class="choice-button" onclick="returnToSquare()">üö∂ Return to Town Square</button>');
            } else if (!castleQuestActive) {
                storyText = "The guards recognize you as a hero and let you pass. The king has a quest for you!";
                setStory(storyText);
                setChoices(
                    '<button class="choice-button" onclick="acceptKingsQuest()">üëë Accept the King\'s Quest</button>' +
                    '<button class="choice-button" onclick="returnToSquare()">üö∂ Leave Castle</button>'
                );
            } else if (dragonDefeated && banditsDefeated) {
                storyText = "The king is overjoyed! 'You have saved our kingdom! Here is your reward!'";
                changeGold(100);
                changeReputation(50);
                setStory(storyText + " You received 100 gold and became a legendary hero!");
                setChoices('<button class="choice-button" onclick="victory()">üéâ Claim Victory!</button>');
            } else {
                let remaining = [];
                if (!dragonDefeated) remaining.push("defeat the dragon");
                if (!banditsDefeated) remaining.push("defeat the bandits");
                storyText = "The king reminds you of your quest: " + remaining.join(" and ") + ".";
                setStory(storyText);
                setChoices('<button class="choice-button" onclick="returnToSquare()">üö∂ Continue Quest</button>');
            }
            
            updateDisplay();
        }
        
        // Action Functions
        function buyDrink() {
            if (playerGold >= 5) {
                changeGold(-5);
                changeHealth(10);
                changeReputation(1);
                setStory("You enjoy a refreshing drink and make some friends. +10 Health, +1 Reputation!");
            }
            goToTavern();
        }
        
        function askAboutDragon() {
            if (playerGold >= 10) {
                setStory("An old adventurer offers to sell you a map to the dragon's lair for 10 gold.");
                setChoices(
                    '<button class="choice-button" onclick="buyMap()">üí∞ Buy Map (10 gold)</button>' +
                    '<button class="choice-button" onclick="goToTavern()">‚ùå Decline</button>'
                );
            } else {
                setStory("An old adventurer knows where the dragon is, but wants 10 gold for the information.");
                setChoices('<button class="choice-button" onclick="goToTavern()">üö∂ Back</button>');
            }
        }
        
        function buyMap() {
            if (playerGold >= 10) {
                changeGold(-10);
                addItem("Dragon Map");
                setStory("You acquired the Dragon Map! Now you can find the dragon's lair.");
            }
            goToTavern();
        }
        
        function listenToRumors() {
            knowsAboutBandits = true;
            setStory("You hear that bandits are hiding in the forest, attacking travelers on the road!");
            setChoices('<button class="choice-button" onclick="goToTavern()">üö∂ Back</button>');
        }
        
        function helpMerchant() {
            helpedMerchant = true;
            changeReputation(5);
            changeGold(10);
            setStory("You chase away the thieves! The merchant rewards you with 10 gold and your reputation increases!");
            setChoices('<button class="choice-button" onclick="goToMarket()">üö∂ Continue Shopping</button>');
        }
        
        function buySword() {
            if (playerGold >= 30) {
                changeGold(-30);
                addItem("Sword");
                setStory("You purchased a fine sword! You're now ready for combat.");
            }
            goToMarket();
        }
        
        function buyShield() {
            if (playerGold >= 20) {
                changeGold(-20);
                addItem("Shield");
                setStory("You purchased a sturdy shield! Your defense has improved.");
            }
            goToMarket();
        }
        
        function buyPotion() {
            if (playerGold >= 15) {
                changeGold(-15);
                addItem("Health Potion");
                setStory("You purchased a health potion!");
            }
            goToMarket();
        }
        
        function acceptKingsQuest() {
            castleQuestActive = true;
            setStory("The king speaks: 'Brave adventurer, our kingdom needs you! Defeat the dragon in the mountains and clear the bandits from our roads. Do this, and great rewards await you!'");
            setChoices(
                '<button class="choice-button" onclick="goToMountains()">‚õ∞Ô∏è Head to the Mountains</button>' +
                '<button class="choice-button" onclick="goToForest()">üå≤ Head to the Forest</button>' +
                '<button class="choice-button" onclick="returnToSquare()">üö∂ Prepare First</button>'
            );
        }
        
        function goToMountains() {
            currentLocation = "Mountain Path";
            
            if (!hasItem("Dragon Map")) {
                setStory("You wander the mountains but can't find the dragon's lair. You need a map!");
                changeHealth(-10);
                setChoices('<button class="choice-button" onclick="returnToSquare()">üö∂ Return to Town</button>');
            } else if (!hasItem("Sword")) {
                setStory("You find the dragon but have no weapon to fight it! You flee in terror!");
                changeHealth(-30);
                setChoices('<button class="choice-button" onclick="returnToSquare()">üèÉ Run Away!</button>');
            } else {
                // Ready to fight dragon
                let storyText = "You find the dragon's lair! The beast is massive and breathes fire. ";
                
                if (hasItem("Shield")) {
                    storyText += "Your shield protects you from the flames! ";
                    changeHealth(-20);
                } else {
                    storyText += "Without a shield, the dragon's fire burns you badly! ";
                    changeHealth(-40);
                }
                
                storyText += "You strike with your sword and defeat the dragon!";
                dragonDefeated = true;
                changeReputation(20);
                changeGold(50);
                addItem("Dragon Scale");
                
                setStory(storyText + " You gained 50 gold, a Dragon Scale, and became famous!");
                setChoices('<button class="choice-button" onclick="returnToSquare()">üéâ Return Victorious</button>');
            }
            updateDisplay();
        }
        
        function goToForest() {
            currentLocation = "Dark Forest";
            
            if (!knowsAboutBandits) {
                setStory("You wander the forest but find nothing. Maybe someone in town knows more?");
                setChoices('<button class="choice-button" onclick="returnToSquare()">üö∂ Return to Town</button>');
            } else if (!hasItem("Sword")) {
                setStory("You find the bandit camp but you're not equipped to fight them!");
                changeHealth(-20);
                setChoices('<button class="choice-button" onclick="returnToSquare()">üèÉ Escape!</button>');
            } else {
                let storyText = "You find the bandit camp and engage in combat! ";
                
                if (hasItem("Shield")) {
                    storyText += "Your shield blocks their arrows! ";
                    changeHealth(-10);
                } else {
                    storyText += "Without a shield, the bandits' arrows wound you! ";
                    changeHealth(-25);
                }
                
                storyText += "You defeat the bandits and free their prisoners!";
                banditsDefeated = true;
                changeReputation(15);
                changeGold(30);
                
                setStory(storyText + " You gained 30 gold and the town's gratitude!");
                setChoices('<button class="choice-button" onclick="returnToSquare()">üéâ Return to Town</button>');
            }
            updateDisplay();
        }
        
        function rest() {
            nextDay();
            changeHealth(20);
            setStory("You rest at the inn. A new day begins! (+20 Health)");
            setChoices('<button class="choice-button" onclick="returnToSquare()">üåÖ Start New Day</button>');
        }
        
        function returnToSquare() {
            currentLocation = "Town Square";
            let storyText = "You're back in the town square. ";
            
            // Different descriptions based on achievements
            if (dragonDefeated && banditsDefeated) {
                storyText += "People cheer as you pass - you're the hero of the kingdom!";
            } else if (playerReputation >= 20) {
                storyText += "People recognize and respect you.";
            } else if (playerReputation >= 10) {
                storyText += "Some people nod at you with approval.";
            } else {
                storyText += "People go about their business.";
            }
            
            setStory(storyText);
            
            setChoices(
                '<button class="choice-button" onclick="goToTavern()">üç∫ Visit the Tavern</button>' +
                '<button class="choice-button" onclick="goToMarket()">üõçÔ∏è Browse the Market</button>' +
                '<button class="choice-button" onclick="goToCastle()">üè∞ Approach the Castle</button>'
            );
            
            updateDisplay();
        }
        
        function gameOver() {
            setStory("Your health reached zero. Your adventure ends here... but every ending is a new beginning!");
            setChoices('<button class="choice-button" onclick="restart()">üîÑ Start New Game</button>');
        }
        
        function victory() {
            setStory("Congratulations! You saved the kingdom and became a legendary hero! The bards will sing of your deeds for generations!");
            setChoices('<button class="choice-button" onclick="restart()">üîÑ Play Again</button>');
        }
        
        function restart() {
            playerHealth = 100;
            playerGold = 20;
            playerReputation = 0;
            currentDay = 1;
            currentLocation = "Town Square";
            inventory = ["Traveler's Cloak"];
            knowsAboutDragon = false;
            knowsAboutBandits = false;
            helpedMerchant = false;
            castleQuestActive = false;
            dragonDefeated = false;
            banditsDefeated = false;
            
            returnToSquare();
        }
    </script>
</body>
</html>