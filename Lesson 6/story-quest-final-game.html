<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Grand Finale - Interactive Programming</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 700px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(to bottom, #1e3c72, #2a5298);
            min-height: 100vh;
        }

        .story-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        h1 {
            text-align: center;
            color: #1e3c72;
            font-size: 2em;
            margin-bottom: 20px;
        }

        .status-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
        }

        .stat-card {
            background: white;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-label {
            font-size: 11px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        .story-text {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-left: 5px solid #667eea;
            font-size: 1.2rem;
            line-height: 1.7;
            color: #2c3e50;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .choices {
            margin: 20px 0;
        }

        button {
            display: block;
            width: 100%;
            padding: 0.8rem 1.5rem;
            margin: 10px 0;
            font-size: 1rem;
            background: white;
            color: #333;
            border: 2px solid #667eea;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        button:hover {
            background: #667eea;
            color: white;
            transform: translateX(5px);
        }

        button:disabled {
            background: #ccc;
            border-color: #ccc;
            color: #666;
            cursor: not-allowed;
            transform: none;
        }

        .equipment-section {
            background: #e8f4fd;
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 5px solid #3498db;
        }

        .equipment-item {
            display: inline-block;
            background: white;
            padding: 0.5rem 1rem;
            margin: 0.25rem;
            border-radius: 6px;
            border: 1px solid #ddd;
            font-size: 0.9rem;
        }

        .system-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-size: 0.9rem;
            color: #856404;
        }

        @media (max-width: 768px) {
            body {
                margin: 20px auto;
                padding: 10px;
            }

            .story-container {
                padding: 1rem;
            }

            .status-panel {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="story-container">
        <h1>üèÜ The Grand Finale</h1>

        <div class="status-panel">
            <div class="stat-card">
                <div class="stat-label">Health</div>
                <div class="stat-value" id="health">100</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Mana</div>
                <div class="stat-value" id="mana">50</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Gold</div>
                <div class="stat-value" id="gold">150</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Level</div>
                <div class="stat-value" id="level">3</div>
            </div>
        </div>

        <div class="equipment-section">
            <strong>üéí Current Equipment:</strong>
            <div id="equipment">
                <span class="equipment-item">‚öîÔ∏è Steel Sword</span>
                <span class="equipment-item">üõ°Ô∏è Iron Shield</span>
                <span class="equipment-item">üíç Ring of Power</span>
            </div>
        </div>

        <div id="story" class="story-text">
            After your legendary adventures across the realm, you stand before the ancient Nexus of Power - the source of all magic in the land. You've become a master adventurer, and now face your ultimate choice...
        </div>

        <div id="choices" class="choices">
            <button onclick="chooseWisdom()">üìö Become the Keeper of Wisdom</button>
            <button onclick="choosePower()">‚ö° Claim the Ultimate Power</button>
            <button onclick="chooseBalance()">‚öñÔ∏è Restore the Balance</button>
        </div>

        <div class="system-info">
            <strong>üéØ Learning Objectives Demonstrated:</strong>
            This final quest showcases all the concepts from our programming journey:
            <br>‚Ä¢ Objects to organize character data and game systems
            <br>‚Ä¢ Methods to handle character actions and state changes
            <br>‚Ä¢ Professional code structure and organization
            <br>‚Ä¢ Polish with animations and visual feedback
        </div>
    </div>

    <script>
        // Character object - demonstrates objects and methods from Lesson 6
        const character = {
            name: "Hero",
            health: 100,
            maxHealth: 100,
            mana: 50,
            maxMana: 50,
            gold: 150,
            level: 3,
            equipment: {
                weapon: "Steel Sword",
                armor: "Iron Shield",
                accessory: "Ring of Power"
            },

            // Method to heal the character
            heal: function(amount) {
                this.health = Math.min(this.maxHealth, this.health + amount);
                this.updateDisplay();
            },

            // Method to spend mana
            spendMana: function(cost) {
                if (this.mana >= cost) {
                    this.mana -= cost;
                    this.updateDisplay();
                    return true;
                }
                return false;
            },

            // Method to gain gold
            gainGold: function(amount) {
                this.gold += amount;
                this.updateDisplay();
            },

            // Method to update the display
            updateDisplay: function() {
                document.getElementById('health').textContent = this.health;
                document.getElementById('mana').textContent = this.mana;
                document.getElementById('gold').textContent = this.gold;
                document.getElementById('level').textContent = this.level;
            }
        };

        // Game effects object - demonstrates professional polish
        const effects = {
            showMessage: function(message, type = 'info') {
                const popup = document.createElement('div');
                popup.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: ${type === 'success' ? '#2ecc71' : '#3498db'};
                    color: white;
                    padding: 1rem;
                    border-radius: 8px;
                    z-index: 1000;
                    animation: slideIn 0.3s ease;
                `;
                popup.textContent = message;
                document.body.appendChild(popup);

                setTimeout(() => popup.remove(), 3000);
            },

            animateChoice: function(element) {
                element.style.transform = 'scale(0.95)';
                element.style.transition = 'transform 0.1s ease';
                setTimeout(() => {
                    element.style.transform = 'scale(1)';
                }, 100);
            }
        };

        // Save system object - demonstrates data persistence
        const saveSystem = {
            save: function() {
                const saveData = {
                    character: {
                        health: character.health,
                        mana: character.mana,
                        gold: character.gold,
                        level: character.level
                    },
                    timestamp: Date.now()
                };
                localStorage.setItem('grandFinaleProgress', JSON.stringify(saveData));
                effects.showMessage('Progress saved!', 'success');
            },

            load: function() {
                const saved = localStorage.getItem('grandFinaleProgress');
                if (saved) {
                    const data = JSON.parse(saved);
                    Object.assign(character, data.character);
                    character.updateDisplay();
                    effects.showMessage('Progress loaded!', 'success');
                }
            }
        };

        // Choice functions - demonstrating different endings
        function chooseWisdom() {
            effects.animateChoice(event.target);

            document.getElementById('story').innerHTML =
                `You choose to become the Keeper of Wisdom. The ancient knowledge flows into your mind,
                 and you become the guardian of all magical learning. Adventurers from across the realm
                 will seek your guidance. You have mastered not just magic and combat, but the greatest
                 power of all - knowledge and wisdom. Your programming journey has taught you that the
                 real magic lies in understanding how things work!`;

            document.getElementById('choices').innerHTML =
                '<button onclick="viewAccomplishments()">üèÜ View Your Accomplishments</button>' +
                '<button onclick="startNewJourney()">üîÑ Begin a New Journey</button>';

            character.gainGold(500);
            effects.showMessage('Wisdom grants you 500 gold!', 'success');
            saveSystem.save();
        }

        function choosePower() {
            effects.animateChoice(event.target);

            if (character.spendMana(30)) {
                document.getElementById('story').innerHTML =
                    `You claim the Ultimate Power! Lightning courses through your veins as you become
                     one of the most powerful beings in existence. With great power comes great responsibility,
                     and you use your newfound abilities to protect the innocent and defend the realm.
                     Your programming skills have taught you that true power comes from organizing complex
                     systems and making them work together harmoniously.`;

                document.getElementById('choices').innerHTML =
                    '<button onclick="viewAccomplishments()">üèÜ View Your Accomplishments</button>' +
                    '<button onclick="startNewJourney()">üîÑ Begin a New Journey</button>';

                character.level++;
                character.updateDisplay();
                effects.showMessage('You gained a level and ultimate power!', 'success');
                saveSystem.save();
            } else {
                document.getElementById('story').innerHTML =
                    `You reach for the Ultimate Power, but your mana is too low! The ancient magic
                     rejects you. Sometimes the greatest power is knowing when you're not ready.
                     The Nexus gives you a second chance...`;

                effects.showMessage('Not enough mana! Choose wisely.', 'info');
            }
        }

        function chooseBalance() {
            effects.animateChoice(event.target);

            document.getElementById('story').innerHTML =
                `You choose to restore the Balance. The chaotic energies stabilize, and harmony
                 returns to the magical realm. You become the Guardian of Balance, ensuring that
                 no single force becomes too powerful. Your programming knowledge has shown you
                 that the best systems are balanced systems - where all parts work together in
                 perfect harmony. You are awarded the highest honor in the land!`;

            document.getElementById('choices').innerHTML =
                '<button onclick="viewAccomplishments()">üèÜ View Your Accomplishments</button>' +
                '<button onclick="startNewJourney()">üîÑ Begin a New Journey</button>';

            character.heal(50);
            character.gainGold(1000);
            effects.showMessage('Balance restored! Full heal and 1000 gold!', 'success');
            saveSystem.save();
        }

        function viewAccomplishments() {
            effects.animateChoice(event.target);

            document.getElementById('story').innerHTML =
                `<strong>üéì Your Programming Journey Accomplishments:</strong><br><br>
                 ‚úÖ <strong>Lesson 1:</strong> Mastered clean, readable code principles<br>
                 ‚úÖ <strong>Lesson 2:</strong> Learned variables and interactive storytelling<br>
                 ‚úÖ <strong>Lesson 3:</strong> Created reusable functions and logic<br>
                 ‚úÖ <strong>Lesson 4:</strong> Implemented conditional decision-making<br>
                 ‚úÖ <strong>Lesson 5:</strong> Organized data with arrays and loops<br>
                 ‚úÖ <strong>Lesson 6:</strong> Built professional systems with objects<br><br>
                 <strong>üèÜ Final Stats:</strong> Level ${character.level} Hero with ${character.gold} gold!<br><br>
                 You've gone from a beginner to a skilled programmer who can build complete,
                 professional-quality interactive applications. The skills you've learned will
                 serve you well in any programming adventure!`;

            document.getElementById('choices').innerHTML =
                '<button onclick="exportProgress()">üì§ Export Your Progress</button>' +
                '<button onclick="startNewJourney()">üîÑ Begin a New Journey</button>';
        }

        function exportProgress() {
            effects.animateChoice(event.target);

            const progressReport = {
                completedLessons: 6,
                finalLevel: character.level,
                finalGold: character.gold,
                completionDate: new Date().toLocaleDateString(),
                achievements: [
                    "Clean Code Master",
                    "Variable Virtuoso",
                    "Function Expert",
                    "Logic Specialist",
                    "Array & Loop Champion",
                    "Object-Oriented Hero"
                ]
            };

            const dataStr = JSON.stringify(progressReport, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);

            const link = document.createElement('a');
            link.href = url;
            link.download = 'programming-journey-complete.json';
            link.click();

            effects.showMessage('Progress exported successfully!', 'success');
        }

        function startNewJourney() {
            effects.animateChoice(event.target);

            if (confirm('Are you ready to begin a new programming adventure? This will reset your progress.')) {
                localStorage.removeItem('grandFinaleProgress');
                location.reload();
            }
        }

        // Initialize the game
        function initializeGame() {
            character.updateDisplay();
            saveSystem.load();

            // Add CSS animation for popups
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
        }

        // Start the game when page loads
        window.addEventListener('DOMContentLoaded', initializeGame);
    </script>
</body>
</html>